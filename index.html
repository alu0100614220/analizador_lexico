<!DOCTYPE html>
<html>
<head>
   <title>Top Down Operator Precedence</title>
   <link href="global.css" rel="stylesheet" type="text/css">
   <script src="parse.js"></script>
   <script src="tokens.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   <script src="main.js"></script>
</head>

<body>
  <h1>Top Down Operator Precedence. Lexical Analysis</h1>
  <p>
    <nav>
      <a href="https://github.com/alu0100614220/analizador_lexico" class="mylink">Repo at GitHub</a>
    </nav>
  </p>
<h2>Input</h2>
    <p> <input type="file" id="files"/> </p>
	
  <p>
  Fill the input box with javascript code:
  </p>
	<textarea id="INPUT">
     var a = "hello"; // initialize a
     var b = function(x) {
             var c = 3;
               return x+c;
             };
  </textarea>
	
  <script type="text/javascript">
  
    document.getElementById('files').addEventListener('change', CopyMe, false);
var dropZone = document.getElementById('INPUT');
dropZone.addEventListener('dragover', handleDragOver, false);
dropZone.addEventListener('drop', handleFileSelect, false);

function CopyMe(evt) {
   console.log ("Hago algo");
    var file = evt.target.files[0];
    if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                      INPUT.innerHTML = e.target.result;
                    }
            var c = reader.readAsText(file);
        }
    else { alert("Failed to load file"); }
}

function handleDragOver(evt) {
 evt.stopPropagation();
 evt.preventDefault();
 evt.target.style.background = "purple";
}

function handleFileSelect(evt) {
  evt.stopPropagation();
  evt.preventDefault();

  var files = evt.dataTransfer.files; // FileList object.

  var output = "";
  for (var i = 0, f; f = files[i]; i++) {
     var reader = new FileReader();
     reader.readAsText(f);
     setTimeout (function () {
        document.getElementById('INPUT').innerHTML = reader.result;
     }, 5)
  }
  evt.target.style.background = "white";
}
	
  </script>
  <br>


<script type="text/javascript" language="javascript">// <![CDATA[
function showHide() {
    var ele = document.getElementById("OUTPUT");
    if(ele.style.display == "block") {
            ele.style.display = "none";
      }
    else {
        ele.style.display = "block";
    }
}
// ]]></script>

<input id="PARSE" value=Parse type=button class="mylink">
<input type=button value="Show/hide" onclick="return showHide();"/>
<pre id=OUTPUT style= "display:none;"></pre>
</body>
</html>